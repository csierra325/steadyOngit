<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/">
    <title>Test App</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5500d3">
    <link rel="shortcut icon" href="/assets/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/icons/mstile-144x144.png">
    <meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
    <meta name="theme-color" content="#5500d3">
    <script src="/preload/snap.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        // Check that service workers are registered
        if ('serviceWorker' in navigator) {
            // Use the window load event to keep the page load performant
            window.addEventListener('load', function() {
              navigator.serviceWorker.register('/sw.js');
            });
        }
    </script>
  </head>
  <body>
    <app>
      <div class="loading-overlay preload">
          <div class="spinner">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" id="app-loading-svg"></svg>
              <p class="loading">Loading...</p>
          </div>
      </div>
    
      <script type="text/javascript">
        const spinner = Snap('#app-loading-svg');
        const circ = spinner.circle(120, 120, 117);
        circ.attr({
            strokeDasharray: 750,
            fill: 'none',
            stroke: '#fff',
            'stroke-width': 7,
            strokeDashoffset: 0,
            'transform': 'rotate(360deg)'
        })

        function throb() {
            Snap.animate(0, 1500, function(value) {
                circ.attr({
                    strokeDashoffset: value,
                    transform: 'rotate('+ (360 - ((360/1500)*value))+'deg)'
                });
            }, 2000, mina.linear, throb);
        }
        throb();
      </script>
    </app>
  </body>
</html>
